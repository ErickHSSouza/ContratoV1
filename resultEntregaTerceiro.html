<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title>Autorização para entrega de veículos de Terceiro</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.1/examples/sticky-footer-navbar/">

    <!-- Bootstrap core CSS -->
    <link href="Content/bootstrap.min.css" rel="stylesheet">

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="/docs/5.1/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" href="/docs/5.1/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="/docs/5.1/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="manifest" href="/docs/5.1/assets/img/favicons/manifest.json">
    <link rel="mask-icon" href="/docs/5.1/assets/img/favicons/safari-pinned-tab.svg" color="#7952b3">
    <link rel="icon" href="/docs/5.1/assets/img/favicons/favicon.ico">
    <meta name="theme-color" content="#7952b3">

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>

    <!-- Custom styles for this template -->
    <link href="sticky-footer-navbar.css" rel="stylesheet">
</head>
<body class="d-flex flex-column h-100">

    <!-- Begin page content -->
    <form class="flex-shrink-0">
        <div>
            
            <!-- PAGINA 1 -->
            <div class="text-center mt-2 mb-2">
                <img src="./public/assets/images/AutomaxLogo.png" class="img-fluid w-50 align-content-center" />
            </div>
            <p class="fs-4"><strong>Autorização para entrega de veículos de Terceiro</strong></p>
            <p> Belo Horizonte, <span id="lbDataAtual"></span> </p>
            
            <br />

            <p>Prezados Senhores, </p>
            <p>Sr(a) <span id="lbNomeCliente"> </span> portador do CPF Nº <span id="lbCPFCliente"> </span> com endereço na cidade de <span id="lbCidade"> </span>, na</p>
            <p><span id="lbEndereco"> </span>, Nº <span id="lbNumero"> </span>, Bairro <span id="lbBairro"> </span>, CEP <span id="lbCep"> </span>. Autoriza o </p>
            <p>Sr(a) <span id="lbNomeTerceiro"> </span> portador do CPF <span id="lbCPFTerceiro"> </span>, Carteira de Identidade Nº a retirar na Sede </p>
            <p><span id="lbLoja"> </span></p> o veiculo:
            <p>Marca<span id="lbMarca"> </span> - Modelo <span id="lbModelo">  - Cor</span><span id="lbCor"></span> Ano <span id="lbAnoModelo"></span> da propriedade da Sr(a),</p>
            <p>conforme descrito na Nota Fiscal nº <span id="lbNumeroNF"> </span> emitida <span id="lbDataCompra"> </span> pela empresa AUTOMAX, isentando a concessionária de toda e qualquer responsabilidade</p>
            <p>seja civil, tributária e criminal que venha a recair sobre o veículo após a retirada do mesmo da sede da concessionária.</p>
            <p>Declaro, ainda, ter recebido o veículo aqui descrito, conforme nota fiscal supra, com os</p>
            <p>respectivos opcionais, em perfeitas condições de funcionamento e aparência, de acordo</p>
            <p>com minha livre escolha, assim como Manual de Uso e Manutenção e o Manual de Garantia</p>
            <p>Declaro, ainda que fui informado sobre todas as observações, restrições, riscos</p>
            <p>e funcionalidades do conjunto de roda e pneu sobressalente, bem como sobre o funcionamento</p>
            <p>do sistema alternativo, caso o veículo contenha. Tomei conhecimento e aceito</p>
            <p>as normas e condições gerais de Garantia e do serviço 24 horas expressas nos respectivos livretes.</p>
            
            <p>Por ser verdade firmo a presente.</p>            
            <p>Belo Horizonte, data <span id="lbDataCompra"> - </span></p>
            <p>Autorizante: - </span></p>


            <div class="container p-4">
                <p><strong>LI, ESTOU CIENTE E DE ACORDO COM AS CLÁUSULAS ACIMA  DESCRITAS.</strong></p>
                <p>Atenciosamente:</p>
                <br />
                <div class="text-center">
                    <div class="row">
                        <div class="col-md-3"></div>
                        <div class="col-md-6">
                            <hr />
                            <p><span id="lbNomeCliente2"> - </span></p>
                        </div>
                        <div class="col-md-3"></div>
                    </div>               
                </div>
            </div>            
            <!-- FIM PAGINA 3 -->
        
        </div>
    </form>
    <script src="../../docs/5.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/feather-icons/feather.min.js"></script>
    <script src="../../assets/vendors/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="../../assets/js/app.js"></script>
    <script src="../../assets/js/main.js"></script>

    <script type="text/javascript">
        /* Máscaras ER */
        function mascara(o, f) {
            v_obj = o
            v_fun = f
            setTimeout("execmascara()", 1)
        }
        function execmascara() {
            v_obj.value = v_fun(v_obj.value)
        }
        function mtel(v) {
            v = v.replace(/\D/g, ""); //Remove tudo o que não é dígito
            v = v.replace(/^(\d{2})(\d)/g, "($1) $2"); //Coloca parênteses em volta dos dois primeiros dígitos
            v = v.replace(/(\d)(\d{4})$/, "$1-$2"); //Coloca hífen entre o quarto e o quinto dígitos
            return v;
        }
        function id(el) {
            return document.getElementById(el);
        }


        document.addEventListener('DOMContentLoaded', function() {
            // Recuperar os dados do localStorage
            const dadosSalvos = localStorage.getItem('dadosContratoEntrega');
            
            if (!dadosSalvos) {
                alert('Dados do contrato não encontrados. Por favor, preencha o formulário novamente.');
                window.location.href = 'EntregaTerceiro.html';
                return;
            }

            try {
                const formData = JSON.parse(dadosSalvos);

                // Função auxiliar para formatar data
                function formatarData(dataString) {
                    if (!dataString) return ' - ';
                    const data = new Date(dataString);
                    return data.toLocaleDateString('pt-BR');
                }

                // Função auxiliar para formatar moeda
                function formatarMoeda(valor) {
                    if (!valor) return ' - ';
                    return parseFloat(valor).toLocaleString('pt-BR', {
                        style: 'currency',
                        currency: 'BRL'
                    });
                }

                // Preencher os dados do contrato
                document.getElementById('lbDataAtual').textContent = formatarData(new Date());
                document.getElementById('lbNomeCliente').textContent = formData.Cliente || ' - ';
                document.getElementById('lbNomeTerceiro').textContent = formData.ClienteTerceiro || ' - ';
                document.getElementById('lbCategoria').textContent = formData.Categoria || ' - ';
                document.getElementById('lbDesconto').textContent = formData.Desconto || ' - ';
                document.getElementById('lbVendedor').textContent = formData.Vendedor || ' - ';
                document.getElementById('lbModelo').textContent = formData.Modelo || ' - ';
                document.getElementById('lbQtd').textContent = formData.Qtde || ' - ';
                document.getElementById('lbCor').textContent = formData.Cor || ' - ';
                document.getElementById('lbAnoModelo').textContent = `${formData.Ano || ' - '}/${formData.ModeloAno || ' - '}`;
                document.getElementById('lbOpcionais').textContent = formData.Opcional || ' - ';
                document.getElementById('lbCortesia').textContent = formData.Cortesia || ' - ';
                document.getElementById('lbValorTotal').textContent = formatarMoeda(formData.PrecoPublico);
                document.getElementById('lbValorTotalDesconto').textContent = formatarMoeda(formData.PrecoVenda);
                document.getElementById('lbEmpresa').textContent = formData.RazaoSocial || ' - ';
                document.getElementById('lbCnpj').textContent = formatarCpfCnpj(formData.CPFCNPJ);
                document.getElementById('lbTel').textContent = formData.Telefone || ' - ';
                document.getElementById('lbEmail').textContent = formData.Email || ' - ';
                document.getElementById('lbInscricaoEstadual').textContent = formData.Inscricao || ' - ';
                document.getElementById('lbEndereco').textContent = 
                    `${formData.Endereco || ' - '}, ${formData.Numero || ' - '}` + 
                    (formData.Complemento ? ` - ${formData.Complemento}` : '');
                document.getElementById('lbCidade').textContent = formData.Cidade || ' - ';
                document.getElementById('lbEstado').textContent = formData.Estado || ' - ';
                document.getElementById('lbDataCompra').textContent = formatarData(formData.DataCompra);
                document.getElementById('lbConcessionaria').textContent = formData.Loja || ' - ';
                document.getElementById('lbPrazo').textContent = formData.Prazo ? `${formData.Prazo} dias` : ' - ';
                document.getElementById('lbFormaPagamento').textContent = formData.Pagamento || ' - ';
                document.getElementById('lbPlacaSeminovo').textContent = formData.PlacaUsado || ' - ';
                document.getElementById('lbValorSeminovo').textContent = formatarMoeda(formData.ValorAvaliacao);
                document.getElementById('lbDataAvaliacao').textContent = formatarData(formData.DataAvaliacao);
                document.getElementById('lbNomeResponsavel').textContent = formData.Cliente || ' - ';

                // Limpar os dados do localStorage após uso
                localStorage.removeItem('dadosContrato');

            } catch (e) {
                console.error('Erro ao processar dados do contrato:', e);
                alert('Ocorreu um erro ao gerar o contrato. Por favor, tente novamente.');
                window.location.href = 'EntregaTerceiro.html';
            }

            // Função para formatar CPF/CNPJ
            function formatarCpfCnpj(valor) {
                if (!valor) return ' - ';
                valor = valor.replace(/\D/g, '');
                
                if (valor.length === 11) { // CPF
                    return valor.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
                } else if (valor.length === 14) { // CNPJ
                    return valor.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/, '$1.$2.$3/$4-$5');
                }
                return valor; // Retorna sem formatação se não for CPF/CNPJ válido
            }
        });

        // Limpar após 30 min (3600000 ms) mesmo se não foram usados
        setTimeout(() => {
            localStorage.removeItem('dadosContrato');
        }, 1800000);
        
    </script>
</body>
</html>